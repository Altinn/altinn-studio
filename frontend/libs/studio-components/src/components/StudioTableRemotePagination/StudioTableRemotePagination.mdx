import { Canvas, Meta } from '@storybook/blocks';
import { Heading, Paragraph } from '@digdir/design-system-react';
import * as StudioTableRemotePaginationStories from './StudioTableRemotePagination.stories';

<Meta of={StudioTableRemotePaginationStories} />

<Heading level={1} size='small'>
  StudioTableRemotePagination
</Heading>

<Paragraph>
  StudioTableRemotePagination brings together Digdir Designsystemet's `Table` and `Pagination`
  components. It dynamically renders a table by passing an array of objects to the `column` and
  `row` props.
</Paragraph>
<Paragraph>
  <ul>
    <li>
      Use this component when data is fetched in chunks, and the pagination logic is handled
      externally. Otherwise, use `StudioTableLocalPagination`.
    </li>
    <li>
      Pagination and sorting can be removed by not passing props to `pagination` and `onSortClick`.
    </li>
  </ul>
</Paragraph>

<Canvas of={StudioTableRemotePaginationStories.Preview} />

<Heading level={2} size='xsmall'>
  Type definitions
</Heading>

```tsx
type StudioTableRemotePaginationProps = {
  columns: Record<'accessor' | 'value', string>[];
  rows: Rows;
  size?: 'small' | 'medium' | 'large';
  onSortClick?: (columnKey: string) => void;
  pagination?: PaginationProps;
};

type Rows = (Record<string, React.ReactNode> & Record<'id', string | number>)[];

type PaginationProps = {
  currentPage: number;
  totalPages: number;
  pageSizeOptions: number[];
  pageSizeLabel: string;
  onPageChange: (currentPage: number) => void;
  onPageSizeChange: (currentSize: number) => void;
  nextButtonText: string;
  previousButtonText: string;
  itemLabel: (num: number) => string;
};
```

<Heading level={2} size='xsmall'>
  Column format
</Heading>
<Paragraph>Columns must have both an `accessor` and a `value` property.</Paragraph>

```tsx
const columns = [
  {
    accessor: 'icon',
    value: '',
  },
  {
    accessor: 'name',
    value: 'Name',
  },
  {
    accessor: 'creator',
    value: 'Created by',
  },
  {
    accessor: 'lastChanged',
    value: 'Last changed',
  },
];
```

<Heading level={2} size='xsmall'>
  Row format
</Heading>
<Paragraph>
  <ul>
    <li>Rows must have an id that is unique.</li>
    <li>
      The accessors in the columns array is used to display the row properties. Therefore, each
      property name has to exactly match the accessor.
    </li>
  </ul>
</Paragraph>

```tsx
const rows = [
  {
    id: 1,
    icon: <StarFillIcon />,
    name: 'Coordinated register notification',
    creator: 'Brønnøysund Register Centre',
    lastChanged: new Date('2023-04-12').toLocaleDateString(),
  },
  {
    id: 2,
    icon: <StarFillIcon />,
    name: 'Application for authorisation and license as a healthcare personnel',
    creator: 'The Norwegian Directorate of Health',
    lastChanged: new Date('2023-04-05').toLocaleDateString(),
  },
];
```
