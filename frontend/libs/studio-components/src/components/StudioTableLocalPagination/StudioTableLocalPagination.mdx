import { Canvas, Meta } from '@storybook/blocks';
import { Heading, Paragraph } from '@digdir/design-system-react';
import * as StudioTableLocalPaginationStories from './StudioTableLocalPagination.stories';

<Meta of={StudioTableLocalPaginationStories} />

<Heading level={1} size='small'>
  StudioTableLocalPagination
</Heading>
<Paragraph>StudioTableLocalPagination is a wrapper for StudioTableRemotePagination.</Paragraph>
<Paragraph>
  <ul>
    <li>
      Use this component when you are fetching a complete set of data, and want the component to
      handle pagination and sorting internally. Otherwise, use `StudioTableRemotePagination`.
    </li>
    <li>
      Pagination and sorting can be removed by not passing props to `pagination` and setting
      `isSortable` to `false`.
    </li>
  </ul>
</Paragraph>

<Canvas of={StudioTableLocalPaginationStories.Preview} />

<Heading level={2} size='xsmall'>
  Type definitions
</Heading>

```tsx
type StudioTableLocalPaginationProps = {
  columns: Record<'accessor' | 'value', string>[];
  rows: Rows;
  size?: 'small' | 'medium' | 'large';
  isSortable?: boolean;
  pagination?: {
    pageSizeOptions: number[];
    pageSizeLabel: string;
    nextButtonText: string;
    previousButtonText: string;
    itemLabel: (num: number) => string;
  };
};

type Rows = (Record<string, React.ReactNode> & Record<'id', string | number>)[];
```

<Heading level={2} size='xsmall'>
  Column format
</Heading>
<Paragraph>Columns must have both an `accessor` and a `value` property.</Paragraph>

```tsx
const columns = [
  {
    accessor: 'icon',
    value: '',
  },
  {
    accessor: 'name',
    value: 'Name',
  },
  {
    accessor: 'creator',
    value: 'Created by',
  },
  {
    accessor: 'lastChanged',
    value: 'Last changed',
  },
];
```

<Heading level={2} size='xsmall'>
  Row format
</Heading>
<Paragraph>
  <ul>
    <li>Rows must have an id that is unique.</li>
    <li>
      The accessors in the columns array is used to display the row properties. Therefore, each
      property name has to exactly match the accessor.
    </li>
  </ul>
</Paragraph>

```tsx
const rows = [
  {
    id: 1,
    icon: <StarFillIcon />,
    name: 'Coordinated register notification',
    creator: 'Brønnøysund Register Centre',
    lastChanged: new Date('2023-04-12').toLocaleDateString(),
  },
  {
    id: 2,
    icon: <StarFillIcon />,
    name: 'Application for authorisation and license as a healthcare personnel',
    creator: 'The Norwegian Directorate of Health',
    lastChanged: new Date('2023-04-05').toLocaleDateString(),
  },
];
```
