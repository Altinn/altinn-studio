apiVersion: notification.toolkit.fluxcd.io/v1beta3
kind: Provider
metadata:
  name: generic-webhook
  namespace: flux-system
spec:
  type: generic
  address: http://studio-gateway.runtime-gateway.svc.cluster.local/flux/webhook
---
apiVersion: notification.toolkit.fluxcd.io/v1beta3
kind: Alert
metadata:
  name: helm-releases
  namespace: flux-system
spec:
  summary: "HelmRelease alert for altinn apps."
  eventMetadata:
    serviceOwner: ${SERVICEOWNER_ID}
    environment: ${ENVIRONMENT}
  providerRef:
    name: generic-webhook
  eventSeverity: info
  eventSources:
    - kind: HelmRelease
      name: '*'
      namespace: 'default'
      # matchLabels:
      #   altinn.studio/managed-by: altinn-studio
