{
	"info": {
		"_postman_id": "a9f66131-838c-43f6-9d62-38d7e2770a6c",
		"name": "App",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "SetUp Cookies",
			"item": [
				{
					"name": "Authenticate user",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "23b471a5-fcac-4c95-b095-bb3ce2de545f",
								"exec": [
									"var current_timestamp = new Date();\r",
									"postman.setEnvironmentVariable(\"current_timestamp\", current_timestamp.toISOString());"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "99bcd88b-ee8c-4974-9713-13e502360074",
								"exec": [
									"const jar = pm.cookies.jar();",
									"var domain = pm.environment.get(\"envUrl\");",
									"jar.clear(domain, function (error){",
									"    if(error)",
									"    {",
									"        console.log(\"error\",error);",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/hal+json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"UserName\": \"{{testUserName}}\",\r\n    \"UserPassword\": \"{{testUserPassword}}\"\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{envUrl}}/api/authentication/authenticatewithpassword",
							"protocol": "https",
							"host": [
								"{{envUrl}}"
							],
							"path": [
								"api",
								"authentication",
								"authenticatewithpassword"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Runtime Cookie",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b4d6640e-658e-4e51-bf8d-790f1698fc1b",
								"exec": [
									"var responseAltinnStudioCookie = postman.getResponseCookie(\"AltinnStudioRuntime\");",
									"responseAltinnStudioCookie = responseAltinnStudioCookie.value.toString();",
									"pm.environment.set(\"AltinnStudioRuntime\",responseAltinnStudioCookie);",
									"",
									"const cookieJar = pm.cookies.jar();",
									"var domain = pm.environment.get(\"envUrl\");",
									"cookieJar.set(domain,\"AltinnStudioRuntime\",responseAltinnStudioCookie,function(error,cookie){",
									"    if(error)",
									"    {",
									"        console.log(\"error\",error);",
									"    }",
									"});",
									"",
									"cookieJar.clear(domain, function (error){",
									"    if(error)",
									"    {",
									"        console.log(\"error\",error);",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "bf515784-db3a-4f7d-a91a-063c67aa4cf5",
								"exec": [
									"pm.environment.set(\"AltinnStudioRuntime\",\"\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://platform.{{envUrl}}/authentication/api/v1/authentication?goto=https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/",
							"protocol": "https",
							"host": [
								"platform",
								"{{envUrl}}"
							],
							"path": [
								"authentication",
								"api",
								"v1",
								"authentication"
							],
							"query": [
								{
									"key": "goto",
									"value": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Party Id",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "31358ee1-d5fa-41b1-8557-bf51828572d1",
								"exec": [
									"if(pm.response.code == 200)",
									"{",
									"    var jsonData = pm.response.json();",
									"    var partyId = jsonData.partyId;",
									"    var ssn = jsonData.party.ssn;",
									"    pm.environment.set(\"instanceOwnerId\",partyId);",
									"    pm.environment.set(\"SSN\",ssn);",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "383f5b55-a14f-477f-ad02-8deff1eb88b0",
								"exec": [
									"const cookieJar = pm.cookies.jar();",
									"var domain = pm.environment.get(\"envUrl\");",
									"cookieJar.clear(domain, function (error){",
									"    if(error)",
									"    {",
									"        console.log(\"error\",error);",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/api/v1/profile/user",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"api",
								"v1",
								"profile",
								"user"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET AttachmentType Id",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "dc5934b3-7615-45a4-b8d9-a5d8d5c9f199",
								"exec": [
									"if (pm.response.code == 200) {\r",
									"    var jsonData = pm.response.json();\r",
									"    var dataTypes = jsonData.dataTypes;\r",
									"    var dataTypesCount = dataTypes.length;\r",
									"    for(var i=0; i<dataTypesCount; i++){\r",
									"        if (isGuid(dataTypes[i].id)){\r",
									"            pm.environment.set(\"attachmentElementType\", dataTypes[i].id);\r",
									"            break;\r",
									"        }\r",
									"    }\r",
									"}\r",
									"\r",
									"function isGuid(stringToTest) {\r",
									"    var regexGuid = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\r",
									"    return regexGuid.test(stringToTest);\r",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://platform.{{envUrl}}/storage/api/v1/applications/{{org}}/{{app}}",
							"protocol": "https",
							"host": [
								"platform",
								"{{envUrl}}"
							],
							"path": [
								"storage",
								"api",
								"v1",
								"applications",
								"{{org}}",
								"{{app}}"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Texts",
			"item": [
				{
					"name": "GET NB text",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "124cf815-580a-4f59-932d-0fae2c574642",
								"exec": [
									"pm.test(\"App Api - Texts - Get app NB texts - Status - 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/api/v1/texts/nb",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"api",
								"v1",
								"texts",
								"nb"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Instances",
			"item": [
				{
					"name": "POST Create Instances",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "97c0777d-9ff6-41af-b0a0-b2e6dd86c7aa",
								"exec": [
									"pm.test(\"App Api - Instances - Add app instance - Status - 201\", function () {\r",
									"    pm.response.to.have.status(201);\r",
									"    var jsonData = pm.response.json();\r",
									"    if(pm.expect(jsonData.instanceOwnerId).not.eql(null))\r",
									"    {\r",
									"        pm.environment.set('instanceOwnerId', jsonData.instanceOwner.partyId);\r",
									"        var instanceId = jsonData.id;\r",
									"        instanceId = instanceId.toString();\r",
									"        instanceId = instanceId.split('/');\r",
									"        instanceId = instanceId[1];\r",
									"        var dataId = jsonData.data[0].id;\r",
									"        pm.environment.set('instanceId',instanceId);\r",
									"        pm.environment.set('dataGuid',dataId);\r",
									"        var processElementId = jsonData.process.currentTask.elementId;\r",
									"        pm.environment.set(\"processElementId\",processElementId);\r",
									"    }\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "53b0fe36-408b-4c80-b8aa-957aff01d2f1",
								"exec": [
									"pm.environment.set(\"instanceId\",\"\");",
									"pm.environment.set(\"dataGuid\",\"\");",
									"pm.environment.set(\"processElementId\",\"\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"instanceOwner\": {\n    \t\"partyId\": \"{{instanceOwnerId}}\"\n    },\n    \"appId\" : \"{{org}}/{{app}}\",\n    \"dueBefore\": \"2019-06-01T12:00:00Z\",\n    \"visibleAfter\": \"2019-05-20T00:00:00Z\",\n    \"title\": { \"nb\": \"Arbeidsmelding\" }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Instance by Id",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "483105a6-e728-4052-a6af-e5f36896c1b5",
								"exec": [
									"pm.test(\"App Api - Instances - Get app instance by ID - Status - 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"App Api - Instances - Get app instance by ID - Content - matches\", function () {\r",
									"    var jsonData = pm.response.json();\r",
									"    var envInstanceId = pm.environment.get(\"instanceId\");\r",
									"    var responseInstanceId = jsonData.id;\r",
									"    responseInstanceId = responseInstanceId.toString();\r",
									"    responseInstanceId = responseInstanceId.split(\"/\");\r",
									"    responseInstanceId = responseInstanceId[1];\r",
									"    pm.expect(responseInstanceId).to.equal(envInstanceId);\r",
									"});\r",
									"\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [],
							"options": {
								"formdata": {}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Data",
			"item": [
				{
					"name": "GET Form Data by id",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "cd0a6081-0996-478c-b1ad-62512a5933a7",
								"exec": [
									"pm.test(\"App Api - Data - Get Form Data by id - Status - 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/data/{{dataGuid}}",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"data",
								"{{dataGuid}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "PUT Edit Form Data",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "12854844-38fe-4714-843e-4a55abadc497",
								"exec": [
									"pm.test(\"App Api - Data - Edit Form Data - Status - 201\", function () {\r",
									"    pm.response.to.have.status(201);\r",
									"    var jsonData = pm.response.json();\r",
									"    var envDataId = pm.environment.get(\"dataGuid\");\r",
									"    pm.expect(jsonData.id).to.equal(envDataId);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/xml"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "<?xml version=\"1.0\"?>\r\n<Skjema xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" skjemanummer=\"1472\" spesifikasjonsnummer=\"9812\" blankettnummer=\"AFP-01\" tittel=\"Arbeidsgiverskjema AFP\" gruppeid=\"8818\">\r\n  <OpplysningerOmArbeidstakeren-grp-8819 gruppeid=\"8819\">\r\n    <Skjemainstans-grp-8854 gruppeid=\"8854\">\r\n      <Journalnummer-datadef-33316 orid=\"33316\">9827</Journalnummer-datadef-33316>\r\n    </Skjemainstans-grp-8854>\r\n  </OpplysningerOmArbeidstakeren-grp-8819>\r\n</Skjema>",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/data/{{dataGuid}}",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"data",
								"{{dataGuid}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "DELETE Form Data - Negative",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "10906233-2caa-4be4-a9d7-2c2884c31c5d",
								"exec": [
									"pm.test(\"App Api - Data - Delete Form Data - Status - 400\", function () {\r",
									"    pm.response.to.have.status(400);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/xml"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "<?xml version=\"1.0\"?>\r\n<Enkeltpersonforetakregistrering xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\">\r\n    <UserFirstName>45678</UserFirstName>\r\n</Enkeltpersonforetakregistrering>",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/data/{{dataGuid}}",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"data",
								"{{dataGuid}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "POST Add attachment",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b76c5f0e-0c21-4c53-813f-d540d0658ff6",
								"exec": [
									"pm.test(\"App Api - Data - Add attachment - Status - 201\", function () {\r",
									"    pm.response.to.have.status(201);\r",
									"    var jsonData = pm.response.json();\r",
									"    if(pm.expect(jsonData.id).not.eql(null))\r",
									"    {\r",
									"        pm.environment.set('dataGuid', jsonData.id);\r",
									"    }\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "5dfc416a-462b-4ab7-b10d-11da491a93a8",
								"exec": [
									"pm.environment.set(\"dataGuid\",\"\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Disposition",
								"name": "Content-Type",
								"value": "attachment; filename=test.pdf",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/octet-stream",
								"type": "text"
							}
						],
						"body": {
							"mode": "file",
							"file": {
								"src": "test_file_pdf.pdf"
							},
							"options": {
								"file": {}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/data?dataType={{attachmentElementType}}",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"data"
							],
							"query": [
								{
									"key": "dataType",
									"value": "{{attachmentElementType}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Attachment Data",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2c6f2b2d-e627-48dc-8513-e914252bfac5",
								"exec": [
									"pm.test(\"App Api - Data - Get Attachment Data - Status - 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"    var responseHeader = pm.response.headers.get(\"Content-Disposition\");\r",
									"    responseHeader = responseHeader.toString();\r",
									"    pm.expect(responseHeader).to.have.string('test.pdf');\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/data/{{dataGuid}}",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"data",
								"{{dataGuid}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "PUT Edit Attachment",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2dc23eee-6f04-473a-9b7e-49d2be4cb010",
								"exec": [
									"pm.test(\"App Api - Data - Edit Attachment Data - Status - 201\", function () {\r",
									"    pm.response.to.have.status(201);\r",
									"    var jsonData = pm.response.json();\r",
									"    var envDataId = pm.environment.get(\"dataGuid\");\r",
									"    pm.expect(jsonData.id).to.equal(envDataId);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/octet-stream"
							},
							{
								"key": "Content-Disposition",
								"value": "attachment; filename=test12.pdf",
								"type": "text"
							}
						],
						"body": {
							"mode": "file",
							"file": {
								"src": "test_file_pdf.pdf"
							},
							"options": {
								"file": {}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/data/{{dataGuid}}",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"data",
								"{{dataGuid}}"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Process",
			"item": [
				{
					"name": "POST Start Process again - Negative",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f1d09c14-d920-484f-b521-07f17692a1eb",
								"exec": [
									"pm.test(\"App Api - Process - Start Process again - negative test - Status - 409\", function () {\r",
									"    pm.response.to.have.status(409);\r",
									"    pm.expect(pm.response.text()).contains('Process is already started');\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/process/start",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"process",
								"start"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Current Process",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2c3d72a0-d135-4021-bf34-40d12537d6c5",
								"exec": [
									"pm.test(\"App Api - Process - Get Current Process - Status - 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"    var elementId = pm.response.json().currentTask.elementId;\r",
									"    pm.environment.set(\"processElementId\",elementId);\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/process",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"process"
							]
						}
					},
					"response": []
				},
				{
					"name": "PUT Move process to same element  - Negative",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f535d4c-e4c7-4f27-b690-c5a6a34fe9fb",
								"exec": [
									"pm.test(\"App Api - Process - Start Process again - negative test - Status - 409\", function () {\r",
									"    pm.response.to.have.status(409);\r",
									"    pm.expect(pm.response.text()).contains('Cannot change process');\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/process/next?elementId={{processElementId}}",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"process",
								"next"
							],
							"query": [
								{
									"key": "elementId",
									"value": "{{processElementId}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Next Process",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a0774fab-c2b3-4f49-a6d2-08223b724777",
								"exec": [
									"pm.test(\"App Api - Process - Get Next Process - Status - 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"    var jsonData = pm.response.json();\r",
									"    var nextProcessElementId = jsonData[0];\r",
									"    pm.environment.set(\"processElementId\", nextProcessElementId);\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/process/next",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"process",
								"next"
							]
						}
					},
					"response": []
				},
				{
					"name": "PUT Complete Process",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a5a85e3b-db5a-4fe8-a9e9-9f1abd734f5b",
								"exec": [
									"pm.test(\"App Api - Instances - Complete process - Status - 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/process/completeProcess",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"process",
								"completeProcess"
							]
						}
					},
					"response": []
				},
				{
					"name": "PUT Complete Process again - Negative",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "cc672d38-ea4c-404f-8634-9527c4762370",
								"exec": [
									"pm.test(\"App Api - Instances - Complete process again - negative test - Status - 409\", function () {\r",
									"    pm.response.to.have.status(409);\r",
									"    pm.expect(pm.response.text()).contains(\"cannot be restarted\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/process/completeProcess",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"process",
								"completeProcess"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Process history",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "de3c4fac-ea35-40c0-adb8-cb05d192b242",
								"exec": [
									"pm.test(\"App Api - Process - Get Process History - Status - 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/process/history",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"process",
								"history"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Multipart",
			"item": [
				{
					"name": "POST Create Instances with mulipart",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "aa9567fa-7d99-4a0c-ab09-95c7361e76f3",
								"exec": [
									"pm.test(\"App Api - Instances - Create app instance with multipart data - Status - 201\", function () {\r",
									"    pm.response.to.have.status(201);\r",
									"    if (pm.response.code == 201)\r",
									"    {\r",
									"        var jsonData = pm.response.json();\r",
									"        if(pm.expect(jsonData.instanceOwnerId).not.eql(null))\r",
									"        {\r",
									"            var instanceId = jsonData.id;\r",
									"            instanceId = instanceId.toString();\r",
									"            instanceId = instanceId.split('/');\r",
									"            instanceId = instanceId[1];\r",
									"            pm.environment.set('instanceId',instanceId);\r",
									"        }\r",
									"        if (pm.expect(jsonData.data[0].id).not.eql(null))\r",
									"        {\r",
									"            var dataId = jsonData.data[0].id;\r",
									"            pm.environment.set('dataGuid',dataId);\r",
									"        }\r",
									"    }\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "6472e7c1-2f71-4430-8ee2-91d9369b6fcd",
								"exec": [
									"pm.environment.set(\"instanceId\",\"\");",
									"pm.environment.set(\"dataGuid\",\"\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "multipart/form-data; boundary=\"abcdefg\"",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "--abcdefg\r\nContent-Type: application/json; charset=utf-8\r\nContent-Disposition: form-data; name=\"instance\"\r\n\r\n{\r\n    \"instanceOwner\": {\r\n    \t\"partyId\": null,\r\n        \"personNumber\": \"{{SSN}}\",\r\n        \"organisationNumber\": null\r\n    }\r\n}\r\n\r\n--abcdefg\r\nContent-Type: application/xml\r\nContent-Disposition: form-data; name=\"default\"\r\n\r\n<?xml version=\"1.0\"?>\r\n<Skjema xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" skjemanummer=\"1472\" spesifikasjonsnummer=\"9812\" blankettnummer=\"AFP-01\" tittel=\"Arbeidsgiverskjema AFP\" gruppeid=\"8818\">\r\n  <OpplysningerOmArbeidstakeren-grp-8819 gruppeid=\"8819\">\r\n    <Skjemainstans-grp-8854 gruppeid=\"8854\">\r\n      <Journalnummer-datadef-33316 orid=\"33316\">98274</Journalnummer-datadef-33316>\r\n    </Skjemainstans-grp-8854>\r\n  </OpplysningerOmArbeidstakeren-grp-8819>\r\n</Skjema>\r\n\r\n--abcdefg--",
							"options": {
								"raw": {
									"language": "text"
								}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Multipart instance",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "3d07add0-7408-4d53-b50c-1bd1454841c9",
								"exec": [
									"pm.test(\"App Api - Instances - Get multipart app instance by ID - Status - 200\", function() {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"App Api - Instances - Get multipart app instance by ID - Content - matches\", function() {",
									"    var jsonData = pm.response.json();",
									"    var envInstanceId = pm.environment.get(\"instanceId\");",
									"    var responseInstanceId = jsonData.id;",
									"    responseInstanceId = responseInstanceId.toString();",
									"    responseInstanceId = responseInstanceId.split(\"/\");",
									"    responseInstanceId = responseInstanceId[1];",
									"    pm.expect(responseInstanceId).to.equal(envInstanceId);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [],
							"options": {
								"formdata": {}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Form Data created by mulipart",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "10132ca2-a4c5-4da3-98d6-47bdae2b8103",
								"exec": [
									"pm.test(\"App Api - Data - GET Form Data created by mulipart - Status - 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/data/{{dataGuid}}",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"data",
								"{{dataGuid}}"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "End2End Test",
			"item": [
				{
					"name": "POST Create Instance",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9326ee61-9dde-4fc9-b074-3000f7a07f3d",
								"exec": [
									"if(pm.response.code == 201)\r",
									"{\r",
									"    var jsonData = pm.response.json();\r",
									"    if(pm.expect(jsonData.instanceOwnerId).not.eql(null))\r",
									"    {\r",
									"        pm.environment.set('instanceOwnerId', jsonData.instanceOwner.partyId);\r",
									"        var instanceId = jsonData.id;\r",
									"        instanceId = instanceId.toString();\r",
									"        instanceId = instanceId.split('/');\r",
									"        instanceId = instanceId[1];\r",
									"        pm.environment.set('instanceId',instanceId);\r",
									"        var dataId = jsonData.data[0].id;\r",
									"        pm.environment.set('dataGuid',dataId);\r",
									"    }\r",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "0a5bce03-6447-4f7a-986c-23583333fbe5",
								"exec": [
									"pm.environment.set(\"instanceId\",\"\");",
									"pm.environment.set(\"dataGuid\",\"\");",
									"pm.environment.set(\"processElementId\",\"\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances?instanceOwnerPartyId={{instanceOwnerId}}",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances"
							],
							"query": [
								{
									"key": "instanceOwnerPartyId",
									"value": "{{instanceOwnerId}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Current Process",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "690fdee5-9b3c-41c7-8c13-9d5103bdf74a",
								"exec": [
									"pm.test(\"App Api - Process - Get Current Process - Status - 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"    var jsonData = pm.response.json();\r",
									"    var elementId = jsonData.currentTask.elementId;\r",
									"    pm.environment.set(\"processElementId\", elementId);\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/process",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"process"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Validate Instance - Not OK",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9973d484-6332-4c3b-ab9e-50a70a3c6b90",
								"exec": [
									"pm.test(\"App Api - Instances - Get Validate Instance - Not OK - Status - 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"pm.test(\"App Api - Instances - Get Validate Instance - Not OK - Content - Matches\", function () {\r",
									"    var jsonData = pm.response.json();\r",
									"    pm.expect(jsonData[0].code).to.equal(\"TooFewDataElementsOfType\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [],
							"options": {
								"formdata": {}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/validate",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"validate"
							]
						}
					},
					"response": []
				},
				{
					"name": "PUT Edit Form Data",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "97822682-8720-4914-85fa-ea2f4251af92",
								"exec": [
									"if (pm.response.code == 201)\r",
									"{\r",
									"    var jsonData = pm.response.json();\r",
									"    var dataGuid = pm.environment.get(\"dataGuid\");\r",
									"    pm.expect(jsonData.id).to.equal(dataGuid);\r",
									"}\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/xml",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "<?xml version=\"1.0\"?>\r\n<Skjema xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" skjemanummer=\"1472\" spesifikasjonsnummer=\"9812\" blankettnummer=\"AFP-01\" tittel=\"Arbeidsgiverskjema AFP\" gruppeid=\"8818\">\r\n  <OpplysningerOmArbeidstakeren-grp-8819 gruppeid=\"8819\">\r\n    <Skjemainstans-grp-8854 gruppeid=\"8854\">\r\n      <Journalnummer-datadef-33316 orid=\"33316\">9827</Journalnummer-datadef-33316>\r\n    </Skjemainstans-grp-8854>\r\n  </OpplysningerOmArbeidstakeren-grp-8819>\r\n</Skjema>",
							"options": {
								"raw": {
									"language": "xml"
								}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/data/{{dataGuid}}",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"data",
								"{{dataGuid}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "POST Add Big attachment",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "bfc50707-4dc7-4019-90fc-ed0ff4945914",
								"exec": [
									"if (pm.response.code == 201)\r",
									"{\r",
									"    var jsonData = pm.response.json();\r",
									"    if(pm.expect(jsonData.id).not.eql(null))\r",
									"    {\r",
									"        pm.environment.set('dataGuid', jsonData.id);\r",
									"    }\r",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "7dabb5e9-c7a6-4ff6-a3af-89502034f2f0",
								"exec": [
									"pm.environment.set(\"dataGuid\",\"\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Disposition",
								"name": "Content-Type",
								"value": "attachment; filename=test.txt",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/octet-stream",
								"type": "text"
							}
						],
						"body": {
							"mode": "file",
							"file": {
								"src": "test_file_morethan_1mb.txt"
							},
							"options": {
								"file": {}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/data?dataType={{attachmentElementType}}",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"data"
							],
							"query": [
								{
									"key": "dataType",
									"value": "{{attachmentElementType}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Validate Data - Not OK",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "3aeecc6e-7c06-401d-9e78-0e8924745167",
								"exec": [
									"pm.test(\"App Api - Instances - Get Validate Instance Data - Not OK - Status - 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"pm.test(\"App Api - Instances - Get Validate Instance Data - Not OK - Content - Matches\", function () {\r",
									"    var jsonData = pm.response.json();\r",
									"    pm.expect(jsonData[0].code).to.equal(\"DataElementTooLarge\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/data/{{dataGuid}}/validate",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"data",
								"{{dataGuid}}",
								"validate"
							]
						}
					},
					"response": []
				},
				{
					"name": "DELETE Big Attachment",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f2597b2-fdad-4abb-8c2b-55948c0185fc",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/octet-stream"
							}
						],
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/data/{{dataGuid}}",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"data",
								"{{dataGuid}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "POST Add attachment",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "681b5234-46ec-4361-b700-0d655c3164a8",
								"exec": [
									"if (pm.response.code == 201)\r",
									"{\r",
									"    var jsonData = pm.response.json();\r",
									"    if(pm.expect(jsonData.id).not.eql(null))\r",
									"    {\r",
									"        pm.environment.set('dataGuid', jsonData.id);\r",
									"    }\r",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "a32c1e38-d2c8-4b7a-8a39-bf109da51ccf",
								"exec": [
									"pm.environment.set(\"dataGuid\",\"\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Disposition",
								"name": "Content-Type",
								"type": "text",
								"value": "attachment; filename=test.pdf"
							},
							{
								"key": "Content-Type",
								"type": "text",
								"value": "application/pdf"
							}
						],
						"body": {
							"mode": "file",
							"file": {
								"src": "test_file_pdf.pdf"
							},
							"options": {
								"file": {}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/data?dataType={{attachmentElementType}}",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"data"
							],
							"query": [
								{
									"key": "dataType",
									"value": "{{attachmentElementType}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Validate Data - OK",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "283f1640-54c3-4a23-9089-6eec54280282",
								"exec": [
									"pm.test(\"App Api - Instances - Get Validate Instance Data - OK - Status - 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"pm.test(\"App Api - Instances - Get Validate Instance Data - OK - Content - Matches\", function () {\r",
									"    var jsonData = pm.response.json();\r",
									"    pm.expect(jsonData).to.be.empty;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/data/{{dataGuid}}/validate",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"data",
								"{{dataGuid}}",
								"validate"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Validate Instance - OK",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "30cb1016-6d66-438e-8d23-4225df08afbf",
								"exec": [
									"pm.test(\"App Api - Instances - Get Validate Instance - OK - Status - 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"pm.test(\"App Api - Instances - Get Validate Instance - OK - Content - Matches\", function () {\r",
									"    var jsonData = pm.response.json();\r",
									"    pm.expect(jsonData).to.be.empty;\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [],
							"options": {
								"formdata": {}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/validate",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"validate"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Next Process",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9040fbff-c4bf-465a-83f5-ec02f30a3604",
								"exec": [
									"pm.test(\"App Api - E2E Test - Get Next Process - Status - 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"    var jsonData = pm.response.json();\r",
									"    var nextProcessElementId = jsonData[0];\r",
									"    pm.environment.set(\"processElementId\", nextProcessElementId);\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "1ad36c89-dc18-4a87-9827-d0a914c41447",
								"exec": [
									"pm.environment.set(\"processElementId\",\"\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/process/next",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"process",
								"next"
							]
						}
					},
					"response": []
				},
				{
					"name": "PUT Move to Next Process",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b2a7cff6-164d-4a86-ae23-48bc22c70a12",
								"exec": [
									"pm.test(\"App Api - Process - next process - Status - 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}/process/next",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}",
								"process",
								"next"
							]
						}
					},
					"response": []
				},
				{
					"name": "GET Instance by Id",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "9f06b63c-4c34-40c8-9132-9b37270098d4",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [],
							"options": {
								"formdata": {}
							}
						},
						"url": {
							"raw": "https://{{org}}.apps.{{envUrl}}/{{org}}/{{app}}/instances/{{instanceOwnerId}}/{{instanceId}}",
							"protocol": "https",
							"host": [
								"{{org}}",
								"apps",
								"{{envUrl}}"
							],
							"path": [
								"{{org}}",
								"{{app}}",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "CleanUp",
			"item": [
				{
					"name": "GET Instances by InstanceOwnerID",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "cae6f057-ed18-4a90-9fda-025156c3d07e",
								"exec": [
									"if (pm.response.code == 200)",
									"{",
									"    var jsonData = pm.response.json();",
									"    var instanceCount = jsonData.length;",
									"    if (instanceCount !== 0)",
									"    {",
									"        var instanceId = jsonData[0].id;",
									"        pm.environment.set('instanceId', instanceId);",
									"    }",
									"    else",
									"    {",
									"        postman.setNextRequest(\"DELETE App\");",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/hal+json",
								"type": "text"
							}
						],
						"url": {
							"raw": "https://platform.{{envUrl}}/storage/api/v1/sbl/instances/{{instanceOwnerId}}?state=active&language=nb",
							"protocol": "https",
							"host": [
								"platform",
								"{{envUrl}}"
							],
							"path": [
								"storage",
								"api",
								"v1",
								"sbl",
								"instances",
								"{{instanceOwnerId}}"
							],
							"query": [
								{
									"key": "state",
									"value": "active"
								},
								{
									"key": "language",
									"value": "nb"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "CleanUp App instances",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "e0d16fa7-6021-4c74-b70a-d10c8f1a5015",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"url": {
							"raw": "https://platform.{{envUrl}}/storage/api/v1/instances/{{instanceOwnerId}}/{{instanceId}}?hard=true",
							"protocol": "https",
							"host": [
								"platform",
								"{{envUrl}}"
							],
							"path": [
								"storage",
								"api",
								"v1",
								"instances",
								"{{instanceOwnerId}}",
								"{{instanceId}}"
							],
							"query": [
								{
									"key": "hard",
									"value": "true"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Check for more instances",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "538281ee-a99b-48dd-bd79-957289d3dcba",
								"exec": [
									"if (pm.response.code == 200)",
									"    {",
									"    var jsonData = pm.response.json();",
									"    var instanceCount = jsonData.length;",
									"    if (instanceCount !== 0)",
									"    {",
									"        var instanceId = jsonData[0].id;",
									"        pm.environment.set('instanceId', instanceId);",
									"        postman.setNextRequest(\"CleanUp App instances\");",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{AltinnStudioRuntime}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"type": "text",
								"value": "application/hal+json"
							}
						],
						"url": {
							"raw": "https://platform.{{envUrl}}/storage/api/v1/sbl/instances/{{instanceOwnerId}}?state=active&language=nb",
							"protocol": "https",
							"host": [
								"platform",
								"{{envUrl}}"
							],
							"path": [
								"storage",
								"api",
								"v1",
								"sbl",
								"instances",
								"{{instanceOwnerId}}"
							],
							"query": [
								{
									"key": "state",
									"value": "active"
								},
								{
									"key": "language",
									"value": "nb"
								}
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "7602db7a-9d97-4ebc-ad46-16a284e19a25",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "25d66bf3-8997-4b69-88f5-4dbd76665e82",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "02bf89d9-c107-4e04-9f21-e19f82ee09df",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "7d22006f-9dc7-41e1-9f35-9bd98acc3f1b",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"protocolProfileBehavior": {}
}
