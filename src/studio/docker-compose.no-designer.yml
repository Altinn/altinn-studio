version: "3.8"

# In order for the nginx config that references altinm_designer to not crash on startup
# we need to have a service with the same name running but not answering on port 5000

# The solution I found was an override file that runs alpine-lates on this port
# so that nginx origin answers for DNS, but uses the backup endpoint on the host machine.
services:
  altinn_designer:
    container_name: altinn-designer
    image: alpine:latest
    networks:
      - altinncore_network
    entrypoint: ["sleep","infinity"]
    # Build is required because original config for altinn_designer is merged
    build:
      context: ./src/load-balancer
      dockerfile: "Dockerfile"

 