apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaNotificationTemplate
metadata:
  name: external-grafana-altinn-studio-overview
spec:
  instanceSelector:
    matchLabels:
      dashboards: 'external-grafana'
  name: Altinn Studio Slack
  editable: true
  template: |
    {{ define "slack.message" -}}
      {{ if .Alerts.Firing -}}
        {{ template "slack.summarize" .Alerts.Firing }}
      {{- end }}
      {{- if .Alerts.Resolved -}}
        {{ template "slack.summarize" .Alerts.Resolved }}
      {{- end }}
    {{- end }}

    {{ define "slack.summarize" -}}
      {{ range . -}}
      - {{ index .Annotations "summary" }}
      {{ end }}
    {{ end }}
