<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>net8.0</TargetFramework>
    <!-- Generator output must work without implicit usings -->
    <ImplicitUsings>disable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
    <IsTestProject>true</IsTestProject>
    <EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>
    <CompilerGeneratedFilesOutputPath>gen</CompilerGeneratedFilesOutputPath>
  </PropertyGroup>
  <ItemGroup>
    <PackageReference Include="coverlet.collector" />
    <PackageReference Include="Microsoft.NET.Test.Sdk" />
    <PackageReference Include="xunit" />
    <PackageReference Include="xunit.runner.visualstudio" />
  </ItemGroup>
  <ItemGroup>
    <Compile Remove="gen\**" />
    <None Include="gen\**" />
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\..\src\Altinn.App.Core\Altinn.App.Core.csproj" />
    <!--   Reference the analyzer directly because it isn't included when using <ProjectReference   -->
    <ProjectReference
      Include="..\..\src\Altinn.App.Analyzers\Altinn.App.Analyzers.csproj"
      OutputItemType="Analyzer"
      ReferenceOutputAssembly="false"
    />
  </ItemGroup>
  <!-- TODO: Reference the real analyzer via local nuget, so that we get the <AdditionalFiles declaration via build.props -->
  <ItemGroup>
    <None Remove="config\applicationmetadata.json" />
    <AdditionalFiles Include="config\applicationmetadata.json">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </AdditionalFiles>
  </ItemGroup>
</Project>
